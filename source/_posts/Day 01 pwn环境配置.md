---
title: Day 01 pwnçŽ¯å¢ƒé…ç½®
date: 2025-08-27
tags: 

  - ubuntu
  - pwntools
  - pwndbg
  - python
categories: pwn
top_img: /images/background/00.jpg
cover: /images/background/bkimg.jpg
description: é‡åˆ°äº†æœ€å¥½çš„01å¸ˆå‚…ðŸ¥°ðŸ¥°ðŸ¥¹ðŸ¥¹ðŸ¥¹
---
# Ubuntu ä¸‹ Pwn çŽ¯å¢ƒé…ç½®

Pwn æ˜¯ CTFï¼ˆCapture The Flagï¼‰ç«žèµ›ä¸­çš„é‡è¦æ–¹å‘ï¼Œä¸»è¦æ¶‰åŠäºŒè¿›åˆ¶æ¼æ´žåˆ©ç”¨ï¼Œè€Œä¸€å¥—å®Œå–„çš„ Pwn çŽ¯å¢ƒæ˜¯å¼€å±• Pwn å­¦ä¹ å’Œç«žèµ›çš„åŸºç¡€ã€‚æœ¬æ•™ç¨‹å°†å¸¦é¢†å¤§å®¶åœ¨ Ubuntu ç³»ç»Ÿä¸­ï¼Œé€šè¿‡ä¸€ç³»åˆ—å‘½ä»¤é€æ­¥å®Œæˆ Pwn çŽ¯å¢ƒçš„é…ç½®ï¼Œæ¶µç›–åŸºç¡€ä¾èµ–åº“ã€å·¥å…·å®‰è£…ä»¥åŠå…³é”®è¾…åŠ©å·¥å…·éƒ¨ç½²ï¼Œå³ä½¿æ˜¯æ–°æ‰‹ä¹Ÿèƒ½è½»æ¾è·Ÿéšæ“ä½œã€‚

## ä¸€ã€çŽ¯å¢ƒé…ç½®å‰çš„å‡†å¤‡

åœ¨å¼€å§‹é…ç½® Pwn çŽ¯å¢ƒå‰ï¼Œè¯·ç¡®ä¿ä½ çš„ Ubuntu ç³»ç»Ÿå¤„äºŽæ­£å¸¸è”ç½‘çŠ¶æ€ï¼Œå› ä¸ºåŽç»­æ‰€æœ‰æ“ä½œéƒ½éœ€è¦é€šè¿‡ç½‘ç»œä¸‹è½½ç›¸å…³è½¯ä»¶åŒ…å’Œå·¥å…·ã€‚åŒæ—¶ï¼Œå»ºè®®ä»¥å…·æœ‰ sudo æƒé™çš„ç”¨æˆ·ç™»å½•ç³»ç»Ÿï¼Œé¿å…å› æƒé™ä¸è¶³å¯¼è‡´å‘½ä»¤æ‰§è¡Œå¤±è´¥ã€‚æ‰“å¼€ Ubuntu çš„ç»ˆç«¯ï¼ˆå¯ä»¥é€šè¿‡å¿«æ·é”®`Ctrl + Alt + T`å¿«é€Ÿè°ƒå‡ºï¼‰ï¼ŒæŽ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ†å››ä¸ªæ­¥éª¤æ‰§è¡Œå‘½ä»¤å®Œæˆé…ç½®ã€‚

## äºŒã€åˆ†æ­¥æ‰§è¡Œå‘½ä»¤é…ç½®çŽ¯å¢ƒ

### æ­¥éª¤ 1ï¼šå®‰è£…åŸºç¡€ä¾èµ–åº“ä¸Žå¸¸ç”¨å·¥å…·

è¿™ä¸€æ­¥æ˜¯çŽ¯å¢ƒé…ç½®çš„åŸºç¡€ï¼Œæˆ‘ä»¬éœ€è¦æ›´æ–°ç³»ç»Ÿè½¯ä»¶æºå¹¶å‡çº§å·²å®‰è£…çš„è½¯ä»¶ï¼ŒåŒæ—¶å®‰è£…ç¼–è¯‘å·¥å…·ã€ç¼–ç¨‹è¯­è¨€çŽ¯å¢ƒã€æ–‡æœ¬ç¼–è¾‘å™¨ã€è°ƒè¯•å·¥å…·ä»¥åŠå¿…è¦çš„åº“æ–‡ä»¶ï¼Œè¿™äº›å·¥å…·å’Œåº“æ–‡ä»¶å°†ä¸ºåŽç»­ Pwn å·¥å…·çš„å®‰è£…å’Œä½¿ç”¨æä¾›æ”¯æŒã€‚

åœ¨ç»ˆç«¯ä¸­ç²˜è´´ä»¥ä¸‹å‘½ä»¤å¹¶å›žè½¦æ‰§è¡Œï¼ˆå‘½ä»¤è¾ƒé•¿ï¼Œç²˜è´´æ—¶ç¡®ä¿å®Œæ•´ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½éœ€è¦è¾“å…¥å½“å‰ç”¨æˆ·çš„å¯†ç ï¼Œè¾“å…¥å¯†ç æ—¶ç»ˆç«¯ä¸ä¼šæ˜¾ç¤ºå­—ç¬¦ï¼Œæ­£å¸¸è¾“å…¥å³å¯ï¼‰ï¼š



```shell
sudo apt update && sudo apt upgrade -y

sudo apt install -y build-essential gcc g++ make cmake git curl wget unzip \

      python3 python3-pip python3-venv \

      vim gdb gdb-multiarch tmux patchelf \

      libc6-dev-i386 libc6-dbg libc6-dbg:i386 \

      lib32z1 lib32ncurses6 lib32stdc++6
```



*   `sudo apt update`ï¼šç”¨äºŽæ›´æ–° Ubuntu ç³»ç»Ÿçš„è½¯ä»¶æºåˆ—è¡¨ï¼Œè®©ç³»ç»ŸçŸ¥é“æœ€æ–°çš„è½¯ä»¶ç‰ˆæœ¬ä¿¡æ¯ã€‚

*   `sudo apt upgrade -y`ï¼šæ ¹æ®æ›´æ–°åŽçš„è½¯ä»¶æºåˆ—è¡¨ï¼Œå‡çº§ç³»ç»Ÿä¸­å·²å®‰è£…çš„è½¯ä»¶ï¼Œ`-y`å‚æ•°è¡¨ç¤ºè‡ªåŠ¨ç¡®è®¤æ‰€æœ‰å‡çº§æ“ä½œï¼Œæ— éœ€æ‰‹åŠ¨è¾“å…¥`y`ç¡®è®¤ã€‚

*   `sudo apt install -y`ï¼šç”¨äºŽå®‰è£…æŒ‡å®šçš„è½¯ä»¶åŒ…ï¼Œ`-y`å‚æ•°åŒæ ·æ˜¯è‡ªåŠ¨ç¡®è®¤å®‰è£…æ“ä½œã€‚åŽé¢ç´§è·Ÿçš„ä¸€ç³»åˆ—è½¯ä»¶åŒ…ä¸­ï¼Œ`build-essential`æ˜¯ç¼–è¯‘å·¥å…·é›†ï¼Œ`gcc`ã€`g++`æ˜¯ C å’Œ C++ ç¼–è¯‘å™¨ï¼Œ`python3`åŠç›¸å…³ç»„ä»¶æ˜¯ Python çŽ¯å¢ƒï¼Œ`vim`æ˜¯æ–‡æœ¬ç¼–è¾‘å™¨ï¼Œ`gdb`ç³»åˆ—æ˜¯è°ƒè¯•å·¥å…·ï¼Œ`libc6`ç›¸å…³åº“æ–‡ä»¶åˆ™æ˜¯ä¸ºäº†æ”¯æŒ 32 ä½ç¨‹åºçš„è¿è¡Œå’Œè°ƒè¯•ã€‚

### æ­¥éª¤ 2ï¼šå®‰è£… Pwn æ ¸å¿ƒå·¥å…· â€”â€”pwntools

pwntools æ˜¯ Pwn æ–¹å‘æœ€å¸¸ç”¨çš„ Python åº“ï¼Œå®ƒé›†æˆäº†å¤§é‡ç”¨äºŽäºŒè¿›åˆ¶æ–‡ä»¶åˆ†æžã€æ¼æ´žåˆ©ç”¨çš„åŠŸèƒ½ï¼Œèƒ½å¤Ÿæžå¤§æé«˜ Pwn æ“ä½œçš„æ•ˆçŽ‡ã€‚æˆ‘ä»¬æä¾›äº†ä¸‰ç§å®‰è£…æ–¹å¼ï¼Œå¤§å®¶å¯ä»¥æ ¹æ®è‡ªå·±çš„æƒ…å†µé€‰æ‹©ï¼ŒæŽ¨èä¼˜å…ˆå°è¯•å‰ä¸¤ç§ï¼Œè‹¥é‡åˆ°ç½‘ç»œé—®é¢˜å¯å°è¯•ç¬¬ä¸‰ç§å›½å†…æºå®‰è£…æ–¹å¼ã€‚

#### æ–¹å¼ä¸€ï¼šé€šè¿‡ pip3 ç›´æŽ¥å®‰è£…ï¼ˆæŽ¨èä¼˜å…ˆå°è¯•ï¼‰

åœ¨ç»ˆç«¯ç²˜è´´ä»¥ä¸‹å‘½ä»¤å¹¶æ‰§è¡Œï¼š



```shell
pip3 install --upgrade pip

pip3 install pwntools
```



*   `pip3 install --upgrade pip`ï¼šå…ˆå°† pip3ï¼ˆPython çš„åŒ…ç®¡ç†å·¥å…·ï¼‰å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬ï¼Œç¡®ä¿åŽç»­å®‰è£… pwntools æ—¶ä¸ä¼šå›  pip ç‰ˆæœ¬è¿‡ä½Žå‡ºçŽ°é—®é¢˜ã€‚

*   `pip3 install pwntools`ï¼šä½¿ç”¨ pip3 å®‰è£… pwntools åº“ã€‚

#### æ–¹å¼äºŒï¼šé€šè¿‡ apt åŒ…ç®¡ç†å™¨å®‰è£…

è‹¥æ–¹å¼ä¸€å®‰è£…å¤±è´¥ï¼Œå¯å°è¯•æ­¤æ–¹å¼ï¼Œåœ¨ç»ˆç«¯ç²˜è´´å‘½ä»¤ï¼š



```shell
sudo apt install python3-pwntools
```

è¿™ç§æ–¹å¼é€šè¿‡ Ubuntu å®˜æ–¹è½¯ä»¶æºå®‰è£…ï¼Œç¨³å®šæ€§è¾ƒé«˜ï¼Œä½†å¯èƒ½ä¸æ˜¯æœ€æ–°ç‰ˆæœ¬ã€‚

#### æ–¹å¼ä¸‰ï¼šé€šè¿‡å›½å†…æ¸…åŽæºå®‰è£…ï¼ˆè§£å†³ç½‘ç»œé—®é¢˜ï¼‰

å¦‚æžœåœ¨å®‰è£…è¿‡ç¨‹ä¸­é‡åˆ°ç½‘ç»œè¶…æ—¶ã€ä¸‹è½½é€Ÿåº¦æ…¢ç­‰é—®é¢˜ï¼Œå¯ä½¿ç”¨å›½å†…çš„æ¸…åŽ PyPI æºè¿›è¡Œå®‰è£…ï¼Œåœ¨ç»ˆç«¯ç²˜è´´ï¼š



```shell
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple pwntools
```

`-i https://pypi.tuna.tsinghua.edu.cn/simple`å‚æ•°æŒ‡å®šäº†ä½¿ç”¨æ¸…åŽçš„ PyPI æºï¼Œèƒ½æœ‰æ•ˆæé«˜å›½å†…ç”¨æˆ·çš„ä¸‹è½½é€Ÿåº¦ã€‚

### æ­¥éª¤ 3ï¼šå®‰è£…å¢žå¼ºåž‹è°ƒè¯•å·¥å…· â€”â€”pwndbg

gdb æ˜¯å¸¸ç”¨çš„è°ƒè¯•å·¥å…·ï¼Œä½†é»˜è®¤åŠŸèƒ½è¾ƒä¸ºåŸºç¡€ï¼Œpwndbg æ˜¯ gdb çš„ä¸€ä¸ªå¢žå¼ºæ’ä»¶ï¼Œå®ƒæ·»åŠ äº†å½©è‰²æ˜¾ç¤ºã€è‡ªåŠ¨åŠ è½½è°ƒè¯•ç¬¦å·ã€ä¾¿æ·çš„è°ƒè¯•å‘½ä»¤ç­‰åŠŸèƒ½ï¼Œèƒ½è®© Pwn è°ƒè¯•è¿‡ç¨‹æ›´åŠ é«˜æ•ˆã€‚

#### ç¬¬ä¸€æ­¥ï¼šå…‹éš† pwndbg ä»“åº“

é¦–å…ˆéœ€è¦ä»Ž GitHub ä¸Šå…‹éš† pwndbg çš„ä»£ç ä»“åº“åˆ°æœ¬åœ°ï¼Œåœ¨ç»ˆç«¯ç²˜è´´ä»¥ä¸‹å‘½ä»¤ï¼ˆè‹¥ç¬¬ä¸€ä¸ªé“¾æŽ¥å…‹éš†é€Ÿåº¦æ…¢ï¼Œå¯ä½¿ç”¨ç¬¬äºŒä¸ªå›½å†…é•œåƒé“¾æŽ¥ï¼‰ï¼š



```shell
# æ–¹å¼ä¸€ï¼šå®˜æ–¹GitHubé“¾æŽ¥

git clone https://github.com/pwndbg/pwndbg

# æ–¹å¼äºŒï¼šå›½å†…é•œåƒé“¾æŽ¥ï¼ˆæŽ¨èå›½å†…ç”¨æˆ·ä½¿ç”¨ï¼‰

git clone https://gitclone.com/github.com/pwndbg/pwndbg.git
```

`git clone`å‘½ä»¤ç”¨äºŽä»Žè¿œç¨‹ä»£ç ä»“åº“å…‹éš†ä»£ç åˆ°æœ¬åœ°ï¼Œæ‰§è¡ŒåŽä¼šåœ¨å½“å‰ç»ˆç«¯æ‰€åœ¨ç›®å½•ä¸‹ç”Ÿæˆä¸€ä¸ªåä¸º`pwndbg`çš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å« pwndbg çš„æ‰€æœ‰ä»£ç ã€‚

#### ç¬¬äºŒæ­¥ï¼šè¿›å…¥ pwndbg ç›®å½•å¹¶æ‰§è¡Œå®‰è£…è„šæœ¬

å…‹éš†å®ŒæˆåŽï¼Œéœ€è¦è¿›å…¥ pwndbg æ–‡ä»¶å¤¹ï¼Œç„¶åŽæ‰§è¡Œå®‰è£…è„šæœ¬è¿›è¡Œå®‰è£…ï¼Œåœ¨ç»ˆç«¯ä¾æ¬¡ç²˜è´´ä»¥ä¸‹å‘½ä»¤ï¼š



```shell
cd pwndbg

./setup.sh
```



*   `cd pwndbg`ï¼šè¿›å…¥åˆšåˆšå…‹éš†ç”Ÿæˆçš„ pwndbg ç›®å½•ï¼Œåªæœ‰è¿›å…¥è¯¥ç›®å½•æ‰èƒ½æ‰§è¡ŒåŽç»­çš„å®‰è£…è„šæœ¬ã€‚

*   `./setup.sh`ï¼šæ‰§è¡Œ pwndbg çš„å®‰è£…è„šæœ¬ï¼Œè¯¥è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£… pwndbg æ‰€éœ€çš„ä¾èµ–ï¼Œå¹¶å®Œæˆ gdb æ’ä»¶çš„é…ç½®ã€‚

#### å®‰è£…è¿‡ç¨‹ä¸­çš„ç‰¹æ®Šå¤„ç†ï¼ˆè‹¥å‡ºçŽ°ä¾èµ–å®‰è£…å¤±è´¥é—®é¢˜ï¼‰

å¦‚æžœåœ¨æ‰§è¡Œ`./setup.sh`æ—¶é‡åˆ°ä¾èµ–å®‰è£…å¤±è´¥çš„æƒ…å†µï¼Œå¯å°è¯•å…ˆé€šè¿‡å›½å†…æºå®‰è£… uv å·¥å…·ï¼ˆç”¨äºŽä¾èµ–ç®¡ç†ï¼‰ï¼Œå†è¿›è¡Œä¾èµ–åŒæ­¥ï¼Œåœ¨ç»ˆç«¯ç²˜è´´ä»¥ä¸‹å‘½ä»¤ï¼š



```shell
pip install -i https://pypi.tuna.tsinghua.edu.cn/simple uv  --break-system-packages

uv sync --index-url https://mirrors.aliyun.com/pypi/simple/
```

æ‰§è¡Œå®ŒæˆåŽï¼Œå†æ¬¡è¿è¡Œ`./setup.sh`å³å¯ç»§ç»­å®Œæˆ pwndbg çš„å®‰è£…ã€‚

### æ­¥éª¤ 4ï¼šå®‰è£…å¤šç‰ˆæœ¬ glibc é›†åˆ â€”â€”glibc-all-in-one

åœ¨ Pwn é¢˜ç›®ä¸­ï¼Œä¸åŒçš„é¢˜ç›®å¯èƒ½ä¾èµ–ä¸åŒç‰ˆæœ¬çš„ glibcï¼ˆGNU C åº“ï¼‰ï¼Œè€Œç³»ç»Ÿé»˜è®¤çš„ glibc ç‰ˆæœ¬å›ºå®šï¼Œæ— æ³•æ»¡è¶³å¤šç§ç‰ˆæœ¬éœ€æ±‚ã€‚glibc-all-in-one æ˜¯ä¸€ä¸ªæ•´åˆäº†å¤šç§å¸¸è§ç‰ˆæœ¬ glibc çš„å·¥å…·é›†ï¼Œå®‰è£…åŽå¯ä»¥æ–¹ä¾¿åœ°ä¸ºä¸åŒé¢˜ç›®åˆ‡æ¢å¯¹åº”çš„ glibc ç‰ˆæœ¬ï¼Œé¿å…å›  glibc ç‰ˆæœ¬ä¸åŒ¹é…å¯¼è‡´é¢˜ç›®æ— æ³•è¿è¡Œæˆ–è°ƒè¯•ã€‚

åœ¨ç»ˆç«¯ç²˜è´´ä»¥ä¸‹å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š



```shell
git clone https://github.com/matrix1001/glibc-all-in-one.git \~/glibc-all-in-one
```



*   `git clone https://github.com/matrix1001/glibc-all-in-one.git`ï¼šå…‹éš† glibc-all-in-one çš„ä»£ç ä»“åº“ã€‚

*   `~/glibc-all-in-one`ï¼šæŒ‡å®šå°†ä»“åº“å…‹éš†åˆ°å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•ï¼ˆ`~`ä»£è¡¨å®¶ç›®å½•ï¼‰ä¸‹çš„`glibc-all-in-one`æ–‡ä»¶å¤¹ä¸­ï¼Œè¿™æ ·åŽç»­æŸ¥æ‰¾å’Œä½¿ç”¨è¯¥å·¥å…·é›†ä¼šæ›´åŠ æ–¹ä¾¿ã€‚

## ä¸‰ã€çŽ¯å¢ƒé…ç½®éªŒè¯

å®Œæˆä»¥ä¸Šæ‰€æœ‰æ­¥éª¤åŽï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ç®€å•çš„æ“ä½œéªŒè¯çŽ¯å¢ƒæ˜¯å¦é…ç½®æˆåŠŸï¼š



1.  **éªŒè¯ pwntools**ï¼šåœ¨ç»ˆç«¯è¾“å…¥`python3`è¿›å…¥ Python äº¤äº’çŽ¯å¢ƒï¼Œç„¶åŽè¾“å…¥`from pwn import *`ï¼Œè‹¥æ²¡æœ‰æŠ¥é”™ï¼Œåˆ™è¯´æ˜Ž pwntools å®‰è£…æˆåŠŸã€‚

2.  **éªŒè¯ pwndbg**ï¼šåœ¨ç»ˆç«¯è¾“å…¥`gdb`ï¼Œè‹¥è¿›å…¥ gdb ç•Œé¢åŽæ˜¾ç¤ºæœ‰`pwndbg`ç›¸å…³çš„æç¤ºä¿¡æ¯ï¼ˆå¦‚å½©è‰²çš„ç‰ˆæœ¬å·ã€æ¬¢è¿Žè¯­ç­‰ï¼‰ï¼Œåˆ™è¯´æ˜Ž pwndbg é…ç½®æˆåŠŸã€‚

3.  **éªŒè¯ glibc-all-in-one**ï¼šè¿›å…¥å®¶ç›®å½•ï¼ŒæŸ¥çœ‹æ˜¯å¦å­˜åœ¨`glibc-all-in-one`æ–‡ä»¶å¤¹ï¼Œè¿›å…¥è¯¥æ–‡ä»¶å¤¹åŽè‹¥èƒ½çœ‹åˆ°åŒ…å«ä¸åŒ glibc ç‰ˆæœ¬çš„æ–‡ä»¶ï¼Œåˆ™è¯´æ˜Žå®‰è£…æˆåŠŸã€‚



# IDAå®‰è£…

IDAæ˜¯å¸®åŠ©æˆ‘ä»¬åˆ†æžäºŒè¿›åˆ¶æ–‡ä»¶çš„å·¥å…·ï¼Œå¯ä»¥è‡ªè¡Œä¸Šç½‘æ‰¾æ‰¾ç ´è§£æ•™ç¨‹ï¼ˆ

> 